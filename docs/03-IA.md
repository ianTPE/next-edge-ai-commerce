# 03-IA – Information Architecture (IA)

> **Purpose**：描述前台與後台的資訊架構（頁面 / 區塊 / 導覽），協助重構時維持一致的頁面結構與權限邊界。  
> **Related**：頁面細節請見 `05-PAGE-LIST.md`，功能流程請見 `02-USER-FLOW.md`。

---

## 0. Scope

- 定義：
  - Storefront（前台）主要區域與導覽。
  - Admin（後台）主要區域、模組與 AI Chat 入口。
- 不處理：
  - 細部 UI 設計（交互、樣式）。
  - Non-MVP 模組（像行銷活動、會員系統）。

---

## 1. Storefront IA（MVP）

### 1.1 頂層結構

- **首頁 `/`**
  - Hero + 精選商品（由 API 提供）。
  - CTA：前往商品列表 / 熱門分類。
- **商品列表 `/products`**
  - 可排序 / 分頁（依 `createdAt` / `price`）。
  - 篩選條件（MVP 可簡化）。
- **商品詳情 `/products/[slug]`**
  - 商品基本資訊（名稱、描述、價格、圖片）。
  - 庫存狀態（基於 `stockQuantity`）。
  - 加入購物車按鈕。
- **購物車 `/cart`**
  - 顯示 client cart items。
  - 編輯數量 / 移除項目。
- **結帳 `/checkout`**
  - 顯示訂單摘要。
  - 呼叫 API 驗證購物車，導向 Stripe Checkout。

### 1.2 Storefront 邊界

- 不提供：Admin 專用資訊（毛利、補貨建議）。
- 不提供：會員中心 / 訂單歷史（留給 Phase 2）。
- 所有頁面資料來自 Public API，**不** 直接讀 DB。

---

## 2. Admin IA（MVP）

### 2.1 頂層導航

- **Dashboard**
  - 今日 / 本週銷售概況。
  - 熱銷商品、低庫存提醒。
- **Products**
  - 商品列表。
  - 商品詳情 / 編輯。
  - 圖片管理。
- **Orders**
  - 訂單列表。
  - 訂單詳細資訊。
- **Reports**
  - 簡易營運報表（Revenue / Items sold）。
- **AI Copilot**
  - Chat 介面。
  - 歷史對話 / 操作摘要（可選）。

### 2.2 模組與畫面關聯

- Dashboard
  - 資料來自：`GET /api/orders/dashboard`、`GET /api/products/low-stock`。
- Products
  - 列表：`GET /api/products/all`。
  - 編輯：`GET /api/products/:id`、`PUT /api/products/:id`。
  - 圖片：`POST /api/media/signed-upload`、`POST /api/media/commit`。
- Orders
  - 列表：`GET /api/orders`。
  - 詳情：`GET /api/orders/:id`。
- Reports
  - 視需求呼叫 `GET /api/orders/stats` 或專用報表 endpoint。
- AI Copilot
  - Chat：`POST /api/ai/chat`。
  - Optional：`GET /api/actions` 顯示歷史操作。

### 2.3 Admin IA 邊界

- Admin UI **不** 實作：
  - 多租戶選單（tenant switch）– 非 MVP。
  - 使用者管理（多角色 / 多權限）– 先用單一 `admin` 角色。
- AI Copilot 是 Admin 的一個「入口」，不是獨立系統：
  - 只對 Admin 開放（必須在已登入狀態下使用）。
  - 所有實際寫入仍由 API 完成。

---

## 3. AI Surface IA

> AI 不是單一頁面，而是一組「入口 + 工具」的整合。這裡只描述入口與其他模組的關係。

- **Admin Web Chat**
  - 位置：Admin 主導航中的一個 tab（或固定浮動按鈕）。
  - 功能：
    - 讀取數據：以自然語言查詢 Dashboard / Products / Orders。
    - 執行操作：調價、補貨、報表生成。
  - 關聯模組：
    - Products、Orders、Reports 模組皆可被 AI 操作（後端透過工具與 API 連結）。

- **Phase 2 Messaging（Telegram / Slack）**
  - 入口：外部 messaging app。
  - 位置：視該平台 UX 而定（bots / slash commands）。
  - 功能：視為 Admin Web Chat 的延伸，重用同一組 AI Gateway + API 工具。

---

## 4. Sitemap（簡化示意）

```plaintext
Storefront
  /                      # Home
  /products              # Products list
  /products/[slug]       # Product detail
  /cart                  # Cart
  /checkout              # Checkout

Admin
  /                      # Dashboard
  /products              # Products list
  /products/:id          # Product detail/edit
  /orders                # Orders list
  /orders/:id            # Order detail
  /reports               # Reports
  /ai                    # AI Copilot
```

---

## 5. IA Boundary Checklist（Refactor 用）

-  Storefront 是否只包含 Shopper 需求？（沒有 Admin 專用資訊）
-  Admin 的導航是否仍以「營運工作」為主，而不是繼續堆疊技術向頁面？
-  AI Copilot 是否只作為 Admin 的一個入口，而非繞過 Admin / API 建立新通路？
-  新增頁面時是否有對應：
   - 清楚的 URL
   - 對應 API routes
   - 所屬角色（Shopper / Admin）？

